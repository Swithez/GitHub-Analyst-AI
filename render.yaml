services:
  # API Gateway
  - type: web
    name: github-analyst-api-gateway
    env: docker
    dockerfilePath: ./services/api_gateway/Dockerfile
    dockerContext: ./services/api_gateway
    envVars:
      - key: GITHUB_SERVICE_URL
        value: https://github-analyst-github-service.onrender.com
      - key: ANALYTICS_SERVICE_URL
        value: https://github-analyst-analytics-service.onrender.com
      - key: DATABASE_SERVICE_URL
        value: https://github-analyst-database-service.onrender.com
      - key: PORT
        value: 8000

  # GitHub Service
  - type: web
    name: github-analyst-github-service
    env: docker
    dockerfilePath: ./services/github_service/Dockerfile
    dockerContext: ./services/github_service
    envVars:
      - key: GITHUB_TOKEN
        sync: false
      - key: PORT
        value: 8001

  # Analytics Service
  - type: web
    name: github-analyst-analytics-service
    env: docker
    dockerfilePath: ./services/analytics_service/Dockerfile
    dockerContext: ./services/analytics_service
    envVars:
      - key: MISTRAL_API_KEY
        sync: false
      - key: PORT
        value: 8002

  # Database Service
  - type: web
    name: github-analyst-database-service
    env: docker
    dockerfilePath: ./services/database_service/Dockerfile
    dockerContext: ./services/database_service
    envVars:
      - key: PORT
        value: 8003

  # Web Client
  - type: web
    name: github-analyst-web-client
    env: docker
    dockerfilePath: ./clients/web_client/Dockerfile
    dockerContext: ./clients/web_client
    envVars:
      - key: API_GATEWAY_URL
        value: https://github-analyst-api-gateway.onrender.com
      - key: TELEGRAM_BOT_TOKEN
        sync: false
      - key: PORT
        value: 8080
